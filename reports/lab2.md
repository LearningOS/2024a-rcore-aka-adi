## 实现

1，重写 sys_get_time 和 sys_task_info，采用translated_byte_buffer方式写入程序实际地址

2，实现mmap，在程序memory_set中插入映射

3，实现munmap，在程序memory_set中删除映射，由memory_set负责物理页的删除

## 简答

### 1,

标志位
```
- 仅当 V(Valid) 位为 1 时，页表项才是合法的；
    
- R/W/X 分别控制索引到这个页表项的对应虚拟页面是否允许读/写/取指；
    
- U 控制索引到这个页表项的对应虚拟页面是否在 CPU 处于 U 特权级的情况下是否被允许访问；
    
- G 我们不理会；
    
- A(Accessed) 记录自从页表项上的这一位被清零之后，页表项的对应虚拟页面是否被访问过；
    
- D(Dirty) 则记录自从页表项上的这一位被清零之后，页表项的对应虚拟页表是否被修改过。

此答案由文档给出。
```

### 2，
```
异常：
1, 无物理页
2，页表无访问页

寄存器值：程序进入trap处理流程

占用内存:10GB / 4KB * 8B = 20MB
LAZY: 分配时只分配页表，不实际分配物理空间。实际的分配在trap时进行
SWAP：可以在PTE中额外存储一些标志来判断是否存于硬盘
```

### 3，
```
更换页表：切换任务
控制访问：标志位U
优势：系统调用无需切换开销，更为灵活

双页表：切换U/S态时都需要
单页表：切换任务时需要，U/S态切换不需要
```


## 荣誉守则
1. 在完成本次实验的过程（含此前学习的过程）中，我曾分别与 **以下各位** 就（与本次实验相关的）以下方面做过交流，还在代码中对应的位置以注释形式记录了具体的交流对象及内容：
    
    无
    
2. 此外，我也参考了 **以下资料** ，还在代码中对应的位置以注释形式记录了具体的参考来源及内容：
    
    >[rCore-Camp-Guide-2024A 文档](https://learningos.cn/rCore-Camp-Guide-2024A/index.html)
    

3. 我独立完成了本次实验除以上方面之外的所有工作，包括代码与文档。 我清楚地知道，从以上方面获得的信息在一定程度上降低了实验难度，可能会影响起评分。

4. 我从未使用过他人的代码，不管是原封不动地复制，还是经过了某些等价转换。 我未曾也不会向他人（含此后各届同学）复制或公开我的实验代码，我有义务妥善保管好它们。 我提交至本实验的评测系统的代码，均无意于破坏或妨碍任何计算机系统的正常运转。 我清楚地知道，以上情况均为本课程纪律所禁止，若违反，对应的实验成绩将按“-100”分计。